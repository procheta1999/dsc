{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sapta\\\\Documents\\\\ReactProjects\\\\dsc-firebase-master\\\\src\\\\components\\\\Link\\\\LinkItem.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport distanceInWordsToNow from \"date-fns/distance_in_words_to_now\";\nimport FirebaseContext from \"../../firebase/context\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { red } from '@material-ui/core/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport ShareIcon from '@material-ui/icons/Share';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport DeleteIcon from '@material-ui/icons/Delete';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    maxWidth: 345\n  },\n  media: {\n    height: 0,\n    paddingTop: '56.25%' // 16:9\n\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)'\n  },\n  avatar: {\n    backgroundColor: red[500]\n  }\n}));\n\nfunction LinkItem({\n  link,\n  index,\n  showCount,\n  history\n}) {\n  const {\n    firebase,\n    user\n  } = React.useContext(FirebaseContext);\n  const router = useRouter();\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(false);\n  const avatar = link.postedBy.name.substring(0, 1);\n\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  function handleVote() {\n    if (!user) {\n      router.push(\"/signin\");\n    } else {\n      const voteRef = firebase.db.collection(\"links\").doc(link.id);\n      voteRef.get().then(doc => {\n        if (doc.exists) {\n          const previousVotes = doc.data().votes;\n          const vote = {\n            votedBy: {\n              id: user.uid,\n              name: user.displayName\n            }\n          };\n          const updatedVotes = [...previousVotes, vote];\n          const voteCount = updatedVotes.length;\n          voteRef.update({\n            votes: updatedVotes,\n            voteCount\n          });\n        }\n      });\n    }\n  }\n\n  function handleDeleteLink() {\n    const linkRef = firebase.db.collection(\"links\").doc(link.id);\n    linkRef.delete().then(() => {\n      console.log(`Document with ID ${link.id} deleted`);\n    }).catch(err => {\n      console.error(\"Error deleting document:\", err);\n    });\n  }\n\n  const postedByAuthUser = user && user.uid === link.postedBy.id;\n  return __jsx(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, __jsx(CardHeader, {\n    avatar: __jsx(Avatar, {\n      \"aria-label\": \"recipe\",\n      className: classes.avatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, avatar),\n    action: postedByAuthUser && __jsx(IconButton, {\n      \"aria-label\": \"delete\",\n      onClick: handleDeleteLink,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }, __jsx(DeleteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }\n    })),\n    title: link.postedBy.name,\n    subheader: distanceInWordsToNow(link.created),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }), __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    color: \"textSecondary\",\n    component: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, link.title)), __jsx(CardActions, {\n    disableSpacing: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }\n  }, __jsx(IconButton, {\n    \"aria-label\": \"add to favorites\",\n    onClick: handleVote,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, __jsx(FavoriteIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  })), __jsx(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    component: \"p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }\n  }, link.votes.length, \" likes\"), __jsx(IconButton, {\n    className: clsx(classes.expand, {\n      [classes.expandOpen]: expanded\n    }),\n    onClick: handleExpandClick,\n    \"aria-expanded\": expanded,\n    \"aria-label\": \"show more\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, __jsx(ExpandMoreIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }))), __jsx(Collapse, {\n    in: expanded,\n    timeout: \"auto\",\n    unmountOnExit: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }, __jsx(Typography, {\n    paragraph: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, link.description))));\n}\n\nexport default LinkItem;","map":{"version":3,"sources":["C:/Users/sapta/Documents/ReactProjects/dsc-firebase-master/src/components/Link/LinkItem.js"],"names":["React","Link","useRouter","distanceInWordsToNow","FirebaseContext","makeStyles","clsx","Card","CardHeader","CardMedia","CardContent","CardActions","Collapse","Avatar","IconButton","Typography","red","FavoriteIcon","ShareIcon","ExpandMoreIcon","DeleteIcon","useStyles","theme","root","maxWidth","media","height","paddingTop","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","LinkItem","link","index","showCount","history","firebase","user","useContext","router","classes","expanded","setExpanded","useState","postedBy","name","substring","handleExpandClick","handleVote","push","voteRef","db","collection","doc","id","get","then","exists","previousVotes","data","votes","vote","votedBy","uid","displayName","updatedVotes","voteCount","length","update","handleDeleteLink","linkRef","delete","console","log","catch","err","error","postedByAuthUser","created","title","description"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Link from 'next/link'\nimport {useRouter} from 'next/router'\nimport distanceInWordsToNow from \"date-fns/distance_in_words_to_now\";\nimport FirebaseContext from \"../../firebase/context\";\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { red } from '@material-ui/core/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport ShareIcon from '@material-ui/icons/Share';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    maxWidth: 345,\n  },\n  media: {\n    height: 0,\n    paddingTop: '56.25%', // 16:9\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  avatar: {\n    backgroundColor: red[500],\n  },\n}));\n\nfunction LinkItem({ link, index, showCount, history }) {\n  const { firebase, user } = React.useContext(FirebaseContext);\n  const router = useRouter();\n  \n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(false);\n\n  const avatar = link.postedBy.name.substring(0,1)\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  function handleVote() {\n    if (!user) {\n      router.push(\"/signin\");\n    } else {\n      const voteRef = firebase.db.collection(\"links\").doc(link.id);\n      voteRef.get().then(doc => {\n        if (doc.exists) {\n          const previousVotes = doc.data().votes;\n          const vote = { votedBy: { id: user.uid, name: user.displayName } };\n          const updatedVotes = [...previousVotes, vote];\n          const voteCount = updatedVotes.length;\n          voteRef.update({ votes: updatedVotes, voteCount });\n        }\n      });\n    }\n  }\n\n  function handleDeleteLink() {\n    const linkRef = firebase.db.collection(\"links\").doc(link.id);\n    linkRef\n      .delete()\n      .then(() => {\n        console.log(`Document with ID ${link.id} deleted`);\n      })\n      .catch(err => {\n        console.error(\"Error deleting document:\", err);\n      });\n  }\n\n  const postedByAuthUser = user && user.uid === link.postedBy.id;\n\n  return (\n    <Card className={classes.root}>\n    <CardHeader\n    avatar={\n        <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            {avatar}\n        </Avatar>\n    }\n    action={postedByAuthUser && (\n        <IconButton aria-label=\"delete\" onClick={handleDeleteLink}>\n        <DeleteIcon/>\n        </IconButton>\n    )}\n    title={link.postedBy.name}\n    subheader={distanceInWordsToNow(link.created)}\n    />\n\n    <CardContent>\n    <Typography variant=\"h5\" color=\"textSecondary\" component=\"h2\">\n        {link.title}\n    </Typography>\n    </CardContent>\n    <CardActions disableSpacing>\n    <IconButton aria-label=\"add to favorites\" onClick={handleVote} >\n        <FavoriteIcon />\n    </IconButton>\n    <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n    {link.votes.length} likes\n    </Typography>\n    <IconButton\n        className={clsx(classes.expand, {\n        [classes.expandOpen]: expanded,\n        })}\n        onClick={handleExpandClick}\n        aria-expanded={expanded}\n        aria-label=\"show more\"\n    >\n        <ExpandMoreIcon />\n    </IconButton>\n    </CardActions>\n    <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n    <CardContent>\n        <Typography paragraph>\n            {link.description}\n        </Typography>\n    </CardContent>\n    </Collapse>\n</Card>\n  );\n}\n\nexport default LinkItem;\n"]},"metadata":{},"sourceType":"module"}
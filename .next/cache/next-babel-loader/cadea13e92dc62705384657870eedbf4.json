{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\sapta\\\\Documents\\\\ReactProjects\\\\dsc-firebase-master\\\\src\\\\components\\\\Link\\\\LinkItem.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport FirebaseContext from \"../../firebase/context\";\n\nfunction LinkItem(_ref) {\n  _s();\n\n  var link = _ref.link,\n      index = _ref.index,\n      showCount = _ref.showCount,\n      history = _ref.history;\n\n  var _React$useContext = React.useContext(FirebaseContext),\n      firebase = _React$useContext.firebase,\n      user = _React$useContext.user;\n\n  var router = useRouter();\n\n  function handleVote() {\n    if (!user) {\n      router.push(\"/signin\");\n    } else {\n      var voteRef = firebase.db.collection(\"links\").doc(link.id);\n      voteRef.get().then(function (doc) {\n        if (doc.exists) {\n          var previousVotes = doc.data().votes;\n          var vote = {\n            votedBy: {\n              id: user.uid,\n              name: user.displayName\n            }\n          };\n          var updatedVotes = [].concat(_toConsumableArray(previousVotes), [vote]);\n          var voteCount = updatedVotes.length;\n          voteRef.update({\n            votes: updatedVotes,\n            voteCount: voteCount\n          });\n        }\n      });\n    }\n  }\n\n  function handleDeleteLink() {\n    var linkRef = firebase.db.collection(\"links\").doc(link.id);\n    linkRef[\"delete\"]().then(function () {\n      console.log(\"Document with ID \".concat(link.id, \" deleted\"));\n    })[\"catch\"](function (err) {\n      console.error(\"Error deleting document:\", err);\n    });\n  }\n\n  var postedByAuthUser = user && user.uid === link.postedBy.id;\n  return __jsx(\"div\", {\n    className: \"flex items-start mt2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, showCount && __jsx(\"span\", {\n    className: \"gray\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 23\n    }\n  }, index, \".\"), __jsx(\"div\", {\n    className: \"vote-button\",\n    onClick: handleVote,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, \"\\u25B2\")), __jsx(\"div\", {\n    className: \"ml1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, link.description, \" \", __jsx(\"span\", {\n    className: \"link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, \"(\", link.title, \")\")), __jsx(\"div\", {\n    className: \"f6 lh-copy gray\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, link.votes.length, \" votes by \", link.postedBy.name, \" \", \" | \", __jsx(Link, {\n    href: \"/LinkDetail/[link.id]\",\n    as: \"/LinkDetail/\".concat(link.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, link.comments.length > 0 ? \"\".concat(link.comments.length, \" comments\") : \"discuss\")), postedByAuthUser && __jsx(React.Fragment, null, \" | \", __jsx(\"span\", {\n    className: \"delete-button\",\n    onClick: handleDeleteLink,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, \"delete\")))));\n}\n\n_s(LinkItem, \"h8zHaVULylT9xIukcqnnwmqfNg4=\", false, function () {\n  return [useRouter];\n});\n\n_c = LinkItem;\nexport default LinkItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"LinkItem\");","map":{"version":3,"sources":["C:/Users/sapta/Documents/ReactProjects/dsc-firebase-master/src/components/Link/LinkItem.js"],"names":["React","Link","useRouter","FirebaseContext","LinkItem","link","index","showCount","history","useContext","firebase","user","router","handleVote","push","voteRef","db","collection","doc","id","get","then","exists","previousVotes","data","votes","vote","votedBy","uid","name","displayName","updatedVotes","voteCount","length","update","handleDeleteLink","linkRef","console","log","err","error","postedByAuthUser","postedBy","description","title","comments"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Link from 'next/link'\nimport {useRouter} from 'next/router'\n\nimport FirebaseContext from \"../../firebase/context\";\n\nfunction LinkItem({ link, index, showCount, history }) {\n  const { firebase, user } = React.useContext(FirebaseContext);\n  const router = useRouter();\n\n  function handleVote() {\n    if (!user) {\n      router.push(\"/signin\");\n    } else {\n      const voteRef = firebase.db.collection(\"links\").doc(link.id);\n      voteRef.get().then(doc => {\n        if (doc.exists) {\n          const previousVotes = doc.data().votes;\n          const vote = { votedBy: { id: user.uid, name: user.displayName } };\n          const updatedVotes = [...previousVotes, vote];\n          const voteCount = updatedVotes.length;\n          voteRef.update({ votes: updatedVotes, voteCount });\n        }\n      });\n    }\n  }\n\n  function handleDeleteLink() {\n    const linkRef = firebase.db.collection(\"links\").doc(link.id);\n    linkRef\n      .delete()\n      .then(() => {\n        console.log(`Document with ID ${link.id} deleted`);\n      })\n      .catch(err => {\n        console.error(\"Error deleting document:\", err);\n      });\n  }\n\n  const postedByAuthUser = user && user.uid === link.postedBy.id;\n\n  return (\n    <div className=\"flex items-start mt2\">\n      <div className=\"flex items-center\">\n        {showCount && <span className=\"gray\">{index}.</span>}\n        <div className=\"vote-button\" onClick={handleVote}>\n          â–²\n        </div>\n      </div>\n      <div className=\"ml1\">\n        <div>\n          {link.description}{\" \"}\n          <span className=\"link\">({link.title})</span>\n        </div>\n        <div className=\"f6 lh-copy gray\">\n          {link.votes.length} votes by {link.postedBy.name}{\" \"}\n          \n          {\" | \"}\n          <Link href=\"/LinkDetail/[link.id]\" as={`/LinkDetail/${link.id}`}>\n            <a>\n            {link.comments.length > 0\n              ? `${link.comments.length} comments`\n              : \"discuss\"}\n            </a>\n            \n          </Link>\n          {postedByAuthUser && (\n            <>\n              {\" | \"}\n              <span className=\"delete-button\" onClick={handleDeleteLink}>\n                delete\n              </span>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default LinkItem;\n"]},"metadata":{},"sourceType":"module"}
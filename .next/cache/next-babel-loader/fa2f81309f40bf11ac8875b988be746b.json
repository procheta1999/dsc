{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\sapta\\\\Documents\\\\ReactProjects\\\\dsc-firebase-master\\\\src\\\\components\\\\Link\\\\LinkItem.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport distanceInWordsToNow from \"date-fns/distance_in_words_to_now\";\nimport FirebaseContext from \"../../firebase/context\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { red } from '@material-ui/core/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\n\n__jsx(Card, {\n  className: classes.root,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 1\n  }\n}, __jsx(CardHeader, {\n  avatar: __jsx(Avatar, {\n    \"aria-label\": \"recipe\",\n    className: classes.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 9\n    }\n  }),\n  action: postedByAuthUser && __jsx(IconButton, {\n    \"aria-label\": \"delete\",\n    onClick: handleDeleteLink,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }, __jsx(DeleteIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  })),\n  title: link.postedBy.name,\n  subheader: distanceInWordsToNow(link.created),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }\n}), __jsx(CardContent, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }\n}, __jsx(Typography, {\n  variant: \"h5\",\n  color: \"textSecondary\",\n  component: \"h2\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }\n}, link.title)), __jsx(CardActions, {\n  disableSpacing: true,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }\n}, liked ? __jsx(Typography, {\n  variant: \"body2\",\n  color: \"textSecondary\",\n  component: \"p\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 8\n  }\n}, \"Liked\") : __jsx(IconButton, {\n  \"aria-label\": \"add to favorites\",\n  onClick: handleVote,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }\n}, __jsx(FavoriteIcon, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 11\n  }\n})), __jsx(Typography, {\n  variant: \"body2\",\n  color: \"textSecondary\",\n  component: \"p\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }\n}, link.votes.length, \" likes\"), __jsx(IconButton, {\n  className: clsx(classes.expand, _defineProperty({}, classes.expandOpen, expanded)),\n  onClick: handleExpandClick,\n  \"aria-expanded\": expanded,\n  \"aria-label\": \"show more\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }\n}, __jsx(ExpandMoreIcon, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }\n}))), __jsx(Collapse, {\n  \"in\": expanded,\n  timeout: \"auto\",\n  unmountOnExit: true,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }\n}, __jsx(CardContent, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }\n}, __jsx(Typography, {\n  paragraph: true,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }\n}, link.description))));\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nfunction voteToggler() {\n  voteRef.get().then(function (doc) {\n    if (doc.exists) {\n      var votes = doc.data().votes;\n\n      if (votes.includes(user._uid)) {\n        setLiked(true);\n      }\n    }\n  });\n}\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      maxWidth: 345\n    },\n    media: {\n      height: 0,\n      paddingTop: '56.25%' // 16:9\n\n    },\n    expand: {\n      transform: 'rotate(0deg)',\n      marginLeft: 'auto',\n      transition: theme.transitions.create('transform', {\n        duration: theme.transitions.duration.shortest\n      })\n    },\n    expandOpen: {\n      transform: 'rotate(180deg)'\n    },\n    avatar: {\n      backgroundColor: red[500]\n    }\n  };\n});\n\nfunction LinkItem(_ref) {\n  _s();\n\n  var link = _ref.link,\n      index = _ref.index,\n      showCount = _ref.showCount,\n      history = _ref.history;\n\n  var _React$useContext = React.useContext(FirebaseContext),\n      firebase = _React$useContext.firebase,\n      user = _React$useContext.user;\n\n  var router = useRouter();\n  var classes = useStyles();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      expanded = _React$useState2[0],\n      setExpanded = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      liked = _React$useState4[0],\n      setLiked = _React$useState4[1];\n\n  var handleExpandClick = function handleExpandClick() {\n    setExpanded(!expanded);\n  };\n\n  function handleVote() {\n    if (!user) {\n      router.push(\"/signin\");\n    } else {\n      voteRef.get().then(function (doc) {\n        if (doc.exists) {\n          var previousVotes = doc.data().votes;\n          var vote = {\n            votedBy: {\n              id: user.uid,\n              name: user.displayName\n            }\n          };\n          var updatedVotes = [].concat(_toConsumableArray(previousVotes), [vote]);\n          var voteCount = updatedVotes.length;\n          voteRef.update({\n            votes: updatedVotes,\n            voteCount: voteCount\n          });\n        }\n      });\n    }\n  }\n\n  function handleDeleteLink() {\n    var linkRef = firebase.db.collection(\"links\").doc(link.id);\n    linkRef[\"delete\"]().then(function () {\n      console.log(\"Document with ID \".concat(link.id, \" deleted\"));\n    })[\"catch\"](function (err) {\n      console.error(\"Error deleting document:\", err);\n    });\n  }\n\n  var postedByAuthUser = user && user.uid === link.postedBy.id;\n  return __jsx(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, __jsx(CardHeader, {\n    avatar: __jsx(Avatar, {\n      \"aria-label\": \"recipe\",\n      className: classes.avatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }),\n    action: postedByAuthUser && __jsx(IconButton, {\n      \"aria-label\": \"delete\",\n      onClick: handleDeleteLink,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }\n    }, __jsx(DeleteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    })),\n    title: link.postedBy.name,\n    subheader: distanceInWordsToNow(link.created),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }), __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    color: \"textSecondary\",\n    component: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }, link.title)), __jsx(CardActions, {\n    disableSpacing: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  }, liked ? __jsx(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    component: \"p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 12\n    }\n  }, \"Liked\") : __jsx(IconButton, {\n    \"aria-label\": \"add to favorites\",\n    onClick: handleVote,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, __jsx(FavoriteIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  })), __jsx(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    component: \"p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }, link.votes.length, \" likes\"), __jsx(IconButton, {\n    className: clsx(classes.expand, _defineProperty({}, classes.expandOpen, expanded)),\n    onClick: handleExpandClick,\n    \"aria-expanded\": expanded,\n    \"aria-label\": \"show more\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, __jsx(ExpandMoreIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  }))), __jsx(Collapse, {\n    \"in\": expanded,\n    timeout: \"auto\",\n    unmountOnExit: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }\n  }, __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    paragraph: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, link.description))));\n}\n\n_s(LinkItem, \"9kuoAExGuLj6W5LD93triISv7VE=\", false, function () {\n  return [useRouter, useStyles];\n});\n\n_c = LinkItem;\nexport default LinkItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"LinkItem\");","map":{"version":3,"sources":["C:/Users/sapta/Documents/ReactProjects/dsc-firebase-master/src/components/Link/LinkItem.js"],"names":["React","Link","useRouter","distanceInWordsToNow","FirebaseContext","makeStyles","clsx","Card","CardHeader","CardMedia","CardContent","CardActions","Collapse","Avatar","IconButton","Typography","red","FavoriteIcon","classes","root","avatar","postedByAuthUser","handleDeleteLink","link","postedBy","name","created","title","liked","handleVote","votes","length","expand","expandOpen","expanded","handleExpandClick","description","ExpandMoreIcon","DeleteIcon","voteToggler","voteRef","get","then","doc","exists","data","includes","user","_uid","setLiked","useStyles","theme","maxWidth","media","height","paddingTop","transform","marginLeft","transition","transitions","create","duration","shortest","backgroundColor","LinkItem","index","showCount","history","useContext","firebase","router","useState","setExpanded","push","previousVotes","vote","votedBy","id","uid","displayName","updatedVotes","voteCount","update","linkRef","db","collection","console","log","err","error"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Link from 'next/link'\nimport {useRouter} from 'next/router'\nimport distanceInWordsToNow from \"date-fns/distance_in_words_to_now\";\nimport FirebaseContext from \"../../firebase/context\";\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { red } from '@material-ui/core/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\n<Card className={classes.root}>\n    <CardHeader\n    avatar={\n        <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            \n        </Avatar>\n    }\n    action={postedByAuthUser && (\n        <IconButton aria-label=\"delete\" onClick={handleDeleteLink}>\n        <DeleteIcon/>\n        </IconButton>\n    )}\n    title={link.postedBy.name}\n    subheader={distanceInWordsToNow(link.created)}\n    />\n\n    <CardContent>\n    <Typography variant=\"h5\" color=\"textSecondary\" component=\"h2\">\n        {link.title}\n    </Typography>\n    </CardContent>\n    <CardActions disableSpacing>\n    {liked ? \n      (<Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n        Liked\n      </Typography>) : (\n        <IconButton aria-label=\"add to favorites\" onClick={handleVote} >\n          <FavoriteIcon />\n        </IconButton>\n      )}\n    <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n    {link.votes.length} likes\n    </Typography>\n    <IconButton\n        className={clsx(classes.expand, {\n        [classes.expandOpen]: expanded,\n        })}\n        onClick={handleExpandClick}\n        aria-expanded={expanded}\n        aria-label=\"show more\"\n    >\n        <ExpandMoreIcon />\n    </IconButton>\n    </CardActions>\n    <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n    <CardContent>\n        <Typography paragraph>\n            {link.description}\n        </Typography>\n    </CardContent>\n    </Collapse>\n</Card>\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nfunction voteToggler(){\n  voteRef.get().then(doc => {\n    if(doc.exists){\n      const votes = doc.data().votes;\n      if(votes.includes(user._uid)){\n        setLiked(true)\n      }\n    }\n  })\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    maxWidth: 345,\n  },\n  media: {\n    height: 0,\n    paddingTop: '56.25%', // 16:9\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  avatar: {\n    backgroundColor: red[500],\n  },\n}));\n\nfunction LinkItem({ link, index, showCount, history }) {\n  const { firebase, user } = React.useContext(FirebaseContext);\n  const router = useRouter();\n  \n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(false);\n  const [liked, setLiked] = React.useState(false)\n  \n\n  \n\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  \n\n  function handleVote() {\n    if (!user) {\n      router.push(\"/signin\");\n    } else {\n      \n      voteRef.get().then(doc => {\n        if (doc.exists) {\n          const previousVotes = doc.data().votes;\n          const vote = { votedBy: { id: user.uid, name: user.displayName } };\n          const updatedVotes = [...previousVotes, vote];\n          const voteCount = updatedVotes.length;\n          voteRef.update({ votes: updatedVotes, voteCount });\n        }\n      });\n    }\n  }\n\n  function handleDeleteLink() {\n    const linkRef = firebase.db.collection(\"links\").doc(link.id);\n    linkRef\n      .delete()\n      .then(() => {\n        console.log(`Document with ID ${link.id} deleted`);\n      })\n      .catch(err => {\n        console.error(\"Error deleting document:\", err);\n      });\n  }\n\n  const postedByAuthUser = user && user.uid === link.postedBy.id;\n\n  return (\n    \n      <Card className={classes.root}>\n        <CardHeader\n        avatar={\n            <Avatar aria-label=\"recipe\" className={classes.avatar}>\n                \n            </Avatar>\n        }\n        action={postedByAuthUser && (\n            <IconButton aria-label=\"delete\" onClick={handleDeleteLink}>\n            <DeleteIcon/>\n            </IconButton>\n        )}\n        title={link.postedBy.name}\n        subheader={distanceInWordsToNow(link.created)}\n        />\n\n        <CardContent>\n        <Typography variant=\"h5\" color=\"textSecondary\" component=\"h2\">\n            {link.title}\n        </Typography>\n        </CardContent>\n        <CardActions disableSpacing>\n        {liked ? \n          (<Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n            Liked\n          </Typography>) : (\n            <IconButton aria-label=\"add to favorites\" onClick={handleVote} >\n              <FavoriteIcon />\n            </IconButton>\n          )}\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n        {link.votes.length} likes\n        </Typography>\n        <IconButton\n            className={clsx(classes.expand, {\n            [classes.expandOpen]: expanded,\n            })}\n            onClick={handleExpandClick}\n            aria-expanded={expanded}\n            aria-label=\"show more\"\n        >\n            <ExpandMoreIcon />\n        </IconButton>\n        </CardActions>\n        <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        <CardContent>\n            <Typography paragraph>\n                {link.description}\n            </Typography>\n        </CardContent>\n        </Collapse>\n      </Card>\n   \n    \n\n  );\n}\n\nexport default LinkItem;\n"]},"metadata":{},"sourceType":"module"}
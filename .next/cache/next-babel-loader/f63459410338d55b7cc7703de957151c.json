{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sapta\\\\Documents\\\\ReactProjects\\\\dsc-firebase-master\\\\src\\\\components\\\\Link\\\\LinkItem.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport FirebaseContext from \"../../firebase/context\";\n\nfunction LinkItem({\n  link,\n  index,\n  showCount,\n  history\n}) {\n  const {\n    firebase,\n    user\n  } = React.useContext(FirebaseContext);\n  const router = useRouter();\n\n  function handleVote() {\n    if (!user) {\n      router.push(\"/signin\");\n    } else {\n      const voteRef = firebase.db.collection(\"links\").doc(link.id);\n      voteRef.get().then(doc => {\n        if (doc.exists) {\n          const previousVotes = doc.data().votes;\n          const vote = {\n            votedBy: {\n              id: user.uid,\n              name: user.displayName\n            }\n          };\n          const updatedVotes = [...previousVotes, vote];\n          const voteCount = updatedVotes.length;\n          voteRef.update({\n            votes: updatedVotes,\n            voteCount\n          });\n        }\n      });\n    }\n  }\n\n  function handleDeleteLink() {\n    const linkRef = firebase.db.collection(\"links\").doc(link.id);\n    linkRef.delete().then(() => {\n      console.log(`Document with ID ${link.id} deleted`);\n    }).catch(err => {\n      console.error(\"Error deleting document:\", err);\n    });\n  }\n\n  const postedByAuthUser = user && user.uid === link.postedBy.id;\n  return __jsx(\"div\", {\n    className: \"flex items-start mt2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, showCount && __jsx(\"span\", {\n    className: \"gray\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 23\n    }\n  }, index, \".\"), __jsx(\"div\", {\n    className: \"vote-button\",\n    onClick: handleVote,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, \"\\u25B2\")), __jsx(\"div\", {\n    className: \"ml1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, link.description, \" \", __jsx(\"span\", {\n    className: \"link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, \"(\", link.title, \")\")), __jsx(\"div\", {\n    className: \"f6 lh-copy gray\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, link.votes.length, \" votes by \", link.postedBy.name, \" \", \" | \", __jsx(Link, {\n    href: `/link/${link.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, link.comments.length > 0 ? `${link.comments.length} comments` : \"discuss\"), postedByAuthUser && __jsx(React.Fragment, null, \" | \", __jsx(\"span\", {\n    className: \"delete-button\",\n    onClick: handleDeleteLink,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }, \"delete\")))));\n}\n\nexport default LinkItem;","map":{"version":3,"sources":["C:/Users/sapta/Documents/ReactProjects/dsc-firebase-master/src/components/Link/LinkItem.js"],"names":["React","Link","useRouter","FirebaseContext","LinkItem","link","index","showCount","history","firebase","user","useContext","router","handleVote","push","voteRef","db","collection","doc","id","get","then","exists","previousVotes","data","votes","vote","votedBy","uid","name","displayName","updatedVotes","voteCount","length","update","handleDeleteLink","linkRef","delete","console","log","catch","err","error","postedByAuthUser","postedBy","description","title","comments"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Link from 'next/link'\nimport {useRouter} from 'next/router'\n\nimport FirebaseContext from \"../../firebase/context\";\n\nfunction LinkItem({ link, index, showCount, history }) {\n  const { firebase, user } = React.useContext(FirebaseContext);\n  const router = useRouter();\n\n  function handleVote() {\n    if (!user) {\n      router.push(\"/signin\");\n    } else {\n      const voteRef = firebase.db.collection(\"links\").doc(link.id);\n      voteRef.get().then(doc => {\n        if (doc.exists) {\n          const previousVotes = doc.data().votes;\n          const vote = { votedBy: { id: user.uid, name: user.displayName } };\n          const updatedVotes = [...previousVotes, vote];\n          const voteCount = updatedVotes.length;\n          voteRef.update({ votes: updatedVotes, voteCount });\n        }\n      });\n    }\n  }\n\n  function handleDeleteLink() {\n    const linkRef = firebase.db.collection(\"links\").doc(link.id);\n    linkRef\n      .delete()\n      .then(() => {\n        console.log(`Document with ID ${link.id} deleted`);\n      })\n      .catch(err => {\n        console.error(\"Error deleting document:\", err);\n      });\n  }\n\n  const postedByAuthUser = user && user.uid === link.postedBy.id;\n\n  return (\n    <div className=\"flex items-start mt2\">\n      <div className=\"flex items-center\">\n        {showCount && <span className=\"gray\">{index}.</span>}\n        <div className=\"vote-button\" onClick={handleVote}>\n          â–²\n        </div>\n      </div>\n      <div className=\"ml1\">\n        <div>\n          {link.description}{\" \"}\n          <span className=\"link\">({link.title})</span>\n        </div>\n        <div className=\"f6 lh-copy gray\">\n          {link.votes.length} votes by {link.postedBy.name}{\" \"}\n          \n          {\" | \"}\n          <Link href={`/link/${link.id}`}>\n            {link.comments.length > 0\n              ? `${link.comments.length} comments`\n              : \"discuss\"}\n          </Link>\n          {postedByAuthUser && (\n            <>\n              {\" | \"}\n              <span className=\"delete-button\" onClick={handleDeleteLink}>\n                delete\n              </span>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default LinkItem;\n"]},"metadata":{},"sourceType":"module"}